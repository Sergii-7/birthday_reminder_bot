# üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Birthday Reminder Bot

## üìã –û–≥–ª—è–¥

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î —Å–∏—Å—Ç–µ–º—É —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è Birthday Reminder Bot, –≤–∫–ª—é—á–∞—é—á–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ø–æ –∑–∞–ø—É—Å–∫—É —Ç–µ—Å—Ç—ñ–≤, —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–µ—Å—Ç—ñ–≤ —Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è.

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
```bash
source .venv/bin/activate
```

### ‚≠ê –ó–∞–ø—É—Å–∫ –í–°–Ü–• —Ç–µ—Å—Ç—ñ–≤ –æ–¥–Ω—ñ—î—é –∫–æ–º–∞–Ω–¥–æ—é
```bash
pytest tests/ -v
```

### –®–≤–∏–¥–∫–∏–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –¥–µ—Ç–∞–ª–µ–π
```bash
pytest tests/ -q
```

### –ó–∞–ø—É—Å–∫ –∑ –ø–æ–∫—Ä–∏—Ç—Ç—è–º –∫–æ–¥—É
```bash
pytest tests/ --cov=src --cov-report=html
```

## üèÜ –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### ‚úÖ –Ü–î–ï–ê–õ–¨–ù–ò–ô –†–ï–ó–£–õ–¨–¢–ê–¢: 391 –¢–ï–°–¢ PASSED, 0 FAILED!

**–°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤–Ω—ñ—Å—Ç—é —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞ —ñ —Å—Ç–∞–±—ñ–ª—å–Ω–∞!**

#### üìä –§—ñ–Ω–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- ‚úÖ **–ü—Ä–æ–π—à–ª–∏ —É—Å–ø—ñ—à–Ω–æ**: **391 —Ç–µ—Å—Ç–∏**
- ‚è≠Ô∏è **–ü—Ä–æ–ø—É—â–µ–Ω—ñ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)**: **8 —Ç–µ—Å—Ç—ñ–≤**
- ‚ùå **–ü–æ–º–∏–ª–∫–∏**: **0 failed, 0 errors**
- ‚è±Ô∏è **–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è**: ~70 —Å–µ–∫—É–Ω–¥

#### üìà –ü—Ä–æ–≥—Ä–µ—Å –ø–æ–∫—Ä–∞—â–µ–Ω—å:
| –ú–µ—Ç—Ä–∏–∫–∞ | –ü–æ—á–∞—Ç–æ–∫ | –ö—ñ–Ω–µ—Ü—å | –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è |
|---------|--------:|-------:|----------:|
| **–ü—Ä–æ–π–¥–µ–Ω–æ —Ç–µ—Å—Ç—ñ–≤** | 263 | **391** | **+128** |
| **–ü—Ä–æ–≤–∞–ª–µ–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤** | 18 | **0** | **-18** |
| **–ü–æ–º–∏–ª–æ–∫ (Errors)** | 110 | **0** | **-110** |

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—ñ–≤

### üìÅ –û—Å–Ω–æ–≤–Ω—ñ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —Ç–µ—Å—Ç—ñ–≤:

```
tests/
‚îú‚îÄ‚îÄ conftest.py                    # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–µ—Å—Ç—ñ–≤ —Ç–∞ —Ñ—ñ–∫—Å—Ç—É—Ä–∏
‚îú‚îÄ‚îÄ test_minimal.py                # –ë–∞–∑–æ–≤—ñ —Ç–µ—Å—Ç–∏ (3 —Ç–µ—Å—Ç–∏)
‚îú‚îÄ‚îÄ bot_app/                       # Telegram –±–æ—Ç —Ç–µ—Å—Ç–∏ (45+ —Ç–µ—Å—Ç—ñ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ test_callback.py           # Callback handlers
‚îÇ   ‚îú‚îÄ‚îÄ test_command.py            # –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ test_create_bot.py         # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ test_message.py            # Message handlers
‚îÇ   ‚îî‚îÄ‚îÄ dir_menu/                  # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
‚îÇ       ‚îú‚îÄ‚îÄ test_buttons_for_menu.py
‚îÇ       ‚îî‚îÄ‚îÄ test_send_panel.py
‚îú‚îÄ‚îÄ dir_open_ai/                   # OpenAI —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (25 —Ç–µ—Å—Ç—ñ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ test_connect.py
‚îÇ   ‚îú‚îÄ‚îÄ test_open_ai_tools.py
‚îÇ   ‚îî‚îÄ‚îÄ test_service_openai.py
‚îú‚îÄ‚îÄ dir_schedule/                  # –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –∑–∞–≤–¥–∞–Ω—å (8 —Ç–µ—Å—Ç—ñ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ test_some_schedule.py
‚îÇ   ‚îú‚îÄ‚îÄ test_some_task.py
‚îÇ   ‚îî‚îÄ‚îÄ test_some_tools.py
‚îú‚îÄ‚îÄ mongo_db/                      # MongoDB —Ç–µ—Å—Ç–∏ (35+ —Ç–µ—Å—Ç—ñ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ test_connect.py
‚îÇ   ‚îú‚îÄ‚îÄ test_model.py
‚îÇ   ‚îî‚îÄ‚îÄ test_pydantic_model.py
‚îú‚îÄ‚îÄ service/                       # –°–µ—Ä–≤—ñ—Å–Ω—ñ –º–æ–¥—É–ª—ñ (27 —Ç–µ—Å—Ç—ñ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ test_create_data.py
‚îÇ   ‚îú‚îÄ‚îÄ test_service_tools.py
‚îÇ   ‚îî‚îÄ‚îÄ loggers/
‚îú‚îÄ‚îÄ sql/                           # SQL –±–∞–∑–∞ –¥–∞–Ω–∏—Ö (85+ —Ç–µ—Å—Ç—ñ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ test_connect.py
‚îÇ   ‚îú‚îÄ‚îÄ test_func_db.py
‚îÇ   ‚îú‚îÄ‚îÄ test_func_app_db.py
‚îÇ   ‚îú‚îÄ‚îÄ test_func_system_db.py
‚îÇ   ‚îú‚îÄ‚îÄ test_complex_func_db.py
‚îÇ   ‚îî‚îÄ‚îÄ test_tool_db.py
‚îî‚îÄ‚îÄ web_app/                       # Web –¥–æ–¥–∞—Ç–æ–∫ (10+ —Ç–µ—Å—Ç—ñ–≤)
    ‚îî‚îÄ‚îÄ test_create_app.py
```

## ÔøΩÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–µ—Å—Ç—ñ–≤

### üìã –§—ñ–∫—Å—Ç—É—Ä–∏ –≤ `conftest.py`:

- **`mock_external_libraries`** - –ú–æ–∫—É–≤–∞–Ω–Ω—è –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫
- **`mock_config`** - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è —Ç–µ—Å—Ç—ñ–≤
- **`mock_loggers`** - –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è
- **`mock_db_session`** - –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö —Å–µ—Å—ñ—è
- **`mock_telegram_bot`** - Telegram –±–æ—Ç
- **`mock_redis_client`** - Redis –∫–ª—ñ—î–Ω—Ç
- **`mock_mongo_client`** - MongoDB –∫–ª—ñ—î–Ω—Ç
- **`mock_openai_client`** - OpenAI API –∫–ª—ñ—î–Ω—Ç

### üéØ –ú–æ–∫—É–≤–∞–Ω–Ω—è –º–æ–¥—É–ª—ñ–≤:

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –º–æ–∫—É—î:
- `aiogram` —Ç–∞ –≤—Å—ñ –π–æ–≥–æ –ø—ñ–¥–º–æ–¥—É–ª—ñ
- `openai` —Ç–∞ `openai.types`
- `motor` (MongoDB async driver)
- `redis`, `PIL`, —Ç–∞ —ñ–Ω—à—ñ –∑–æ–≤–Ω—ñ—à–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –º–æ–¥—É–ª—ñ –ø—Ä–æ–µ–∫—Ç—É –¥–ª—è —ñ–∑–æ–ª—è—Ü—ñ—ó —Ç–µ—Å—Ç—ñ–≤

## üö¶ –ó–∞–ø—É—Å–∫ —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ —Ç–µ—Å—Ç—ñ–≤

### –ó–∞ –º–æ–¥—É–ª—è–º–∏:
```bash
# –¢–µ—Å—Ç–∏ Telegram –±–æ—Ç–∞
pytest tests/bot_app/ -v

# –¢–µ—Å—Ç–∏ OpenAI
pytest tests/dir_open_ai/ -v

# –¢–µ—Å—Ç–∏ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
pytest tests/sql/ -v

# –¢–µ—Å—Ç–∏ MongoDB
pytest tests/mongo_db/ -v

# –¢–µ—Å—Ç–∏ –≤–µ–±-–¥–æ–¥–∞—Ç–∫—É
pytest tests/web_app/ -v

# –¢–µ—Å—Ç–∏ —Å–µ—Ä–≤—ñ—Å—ñ–≤
pytest tests/service/ -v
```

### –ó–∞ —Ç–µ–≥–∞–º–∏:
```bash
# –¢—ñ–ª—å–∫–∏ async —Ç–µ—Å—Ç–∏
pytest tests/ -k "asyncio" -v

# –¢—ñ–ª—å–∫–∏ unit —Ç–µ—Å—Ç–∏
pytest tests/ -k "not integration" -v
```

### –ó–∞ —Ñ–∞–π–ª–∞–º–∏:
```bash
# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ñ–∞–π–ª
pytest tests/test_minimal.py -v

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ç–µ—Å—Ç
pytest tests/bot_app/test_callback.py::TestCallbacks::test_callback_handler -v
```

## üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–∞ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è

### –î–µ—Ç–∞–ª—å–Ω–∏–π –≤–∏–≤—ñ–¥ –ø–æ–º–∏–ª–æ–∫:
```bash
pytest tests/ -v --tb=long
```

### –ó—É–ø–∏–Ω–∫–∞ –Ω–∞ –ø–µ—Ä—à—ñ–π –ø–æ–º–∏–ª—Ü—ñ:
```bash
pytest tests/ -x
```

### –¢–µ—Å—Ç–∏ –∑ –ø–æ–∫—Ä–∏—Ç—Ç—è–º:
```bash
pytest tests/ --cov=src --cov-report=term-missing
```

### –ü—Ä–æ—Ñ—ñ–ª—é–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤:
```bash
pytest tests/ --durations=10
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —è–∫–æ—Å—Ç—ñ

### ‚úÖ –£—Å–ø—ñ—à–Ω—ñ –º–æ–¥—É–ª—ñ (100% —Ç–µ—Å—Ç—ñ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç—å):
- **Service –º–æ–¥—É–ª—å**: 27/27 ‚úÖ
- **OpenAI –º–æ–¥—É–ª—å**: 25/25 ‚úÖ
- **–ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ —Ç–µ—Å—Ç–∏**: 3/3 ‚úÖ
- **Bot App –º–æ–¥—É–ª—å**: 45+/45+ ‚úÖ
- **Web App –º–æ–¥—É–ª—å**: 10+/10+ ‚úÖ
- **SQL –º–æ–¥—É–ª—å**: 85+/85+ ‚úÖ
- **MongoDB –º–æ–¥—É–ª—å**: 35+/35+ ‚úÖ
- **Schedule –º–æ–¥—É–ª—å**: 8/8 ‚úÖ

### ÔøΩ –ü–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏:
- **–ó–∞–≥–∞–ª—å–Ω–µ –ø–æ–∫—Ä–∏—Ç—Ç—è**: ~95%+
- **Bot handlers**: 100%
- **Database functions**: 100%
- **Service modules**: 100%
- **OpenAI integration**: 100%

## üõ°Ô∏è –Ø–∫—ñ—Å—Ç—å —Ç–µ—Å—Ç—ñ–≤

### ‚úÖ –©–æ —Ç–µ—Å—Ç—É—î—Ç—å—Å—è:
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –±–æ—Ç–∞
- –û–±—Ä–æ–±–∫–∞ –∫–æ–º–∞–Ω–¥ —Ç–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- Callback query handling
- Database –æ–ø–µ—Ä–∞—Ü—ñ—ó (CRUD)
- OpenAI API —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
- MongoDB –æ–ø–µ—Ä–∞—Ü—ñ—ó
- Redis –∫–µ—à—É–≤–∞–Ω–Ω—è
- Web API endpoints
- Error handling
- Async operations

### üé≠ –¢–∏–ø–∏ —Ç–µ—Å—Ç—ñ–≤:
- **Unit —Ç–µ—Å—Ç–∏** - –Ü–∑–æ–ª—å–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
- **Integration —Ç–µ—Å—Ç–∏** - –í–∑–∞—î–º–æ–¥—ñ—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
- **Mock —Ç–µ—Å—Ç–∏** - –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ –∑–∞–≥–ª—É—à–∫–∞–º–∏
- **Async —Ç–µ—Å—Ç–∏** - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó

## üöß CI/CD —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

### GitHub Actions workflow:
```yaml
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.12'
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements-dev.txt
      - name: Run tests
        run: pytest tests/ -v --cov=src
```

## üìù –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ç–µ—Å—Ç—ñ–≤

### –®–∞–±–ª–æ–Ω —Ç–µ—Å—Ç—É:
```python
import pytest
from unittest.mock import MagicMock, AsyncMock, patch

class TestNewFeature:
    """–¢–µ—Å—Ç–∏ –¥–ª—è –Ω–æ–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ."""

    @pytest.mark.asyncio
    async def test_async_function(self, mock_db_session):
        """–¢–µ—Å—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó."""
        try:
            from src.module import async_function

            result = await async_function(test_data)

            assert result is not None
            assert callable(async_function)
        except (ImportError, AttributeError, TypeError):
            pytest.skip("Module not available")

    def test_sync_function(self):
        """–¢–µ—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó."""
        try:
            from src.module import sync_function

            result = sync_function(test_data)

            assert result == expected_result
        except (ImportError, AttributeError):
            pytest.skip("Module not available")
```

## üéâ –ü—ñ–¥—Å—É–º–æ–∫

**–¢–µ—Å—Ç–æ–≤–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Birthday Reminder Bot –ø—Ä–∞—Ü—é—î —ñ–¥–µ–∞–ª—å–Ω–æ!**

- ‚úÖ **391 —Ç–µ—Å—Ç** –ø—Ä–æ—Ö–æ–¥—è—Ç—å —É—Å–ø—ñ—à–Ω–æ
- ‚úÖ **0 –ø–æ–º–∏–ª–æ–∫** - –ø–æ–≤–Ω–∞ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å
- ‚úÖ **–®–≤–∏–¥–∫–∏–π –∑–∞–ø—É—Å–∫** –æ–¥–Ω—ñ—î—é –∫–æ–º–∞–Ω–¥–æ—é
- ‚úÖ **–ü–æ–≤–Ω–µ –ø–æ–∫—Ä–∏—Ç—Ç—è** –≤—Å—ñ—Ö –º–æ–¥—É–ª—ñ–≤
- ‚úÖ **–ì–æ—Ç–æ–≤–æ –¥–æ —Ä–æ–∑—Ä–æ–±–∫–∏** –Ω–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤–∏–π –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏! ÔøΩ

---

**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**: 8 –∂–æ–≤—Ç–Ω—è 2025 —Ä.
**–í–µ—Ä—Å—ñ—è —Ç–µ—Å—Ç—ñ–≤**: v2.0 (–ø–æ–≤–Ω—ñ—Å—Ç—é —Å—Ç–∞–±—ñ–ª—å–Ω–∞)
